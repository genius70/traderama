# A string used to distinguish different Supabase projects on the same host.
project_id = "qyadjaahgiqkohvucfmg"

[api]
enabled = true
# Port for the API URL (default for local development).
port = 54321
# Schemas exposed in the API (includes trading-related schemas).
schemas = ["public", "storage", "graphql_public", "trading"]
# Extra schemas in search_path (includes extensions for trading analytics).
extra_search_path = ["public", "extensions", "trading"]
# Maximum rows returned per request (increased for market data).
max_rows = 5000

[db]
# Port for local database access.
port = 54322
# Major PostgreSQL version (latest supported by Supabase).
major_version = 15

[auth]
enabled = true
# Site URL for production (update to your deployed domain in production).
site_url = "https://traderama.pro"
# Redirect URLs for auth (includes local and production).
additional_redirect_urls = ["http://127.0.0.1:3000", "https://traderama.pro"]
# JWT expiry (1 hour default).
jwt_expiry = 3600
# Enable refresh token rotation for security.
enable_refresh_token_rotation = true
# Refresh token reuse interval (10 seconds).
refresh_token_reuse_interval = 10
# Restrict user signups (invite-only for trading platform).
enable_signup = false

[auth.email]
# Disable email signups (use OAuth or invite-only).
enable_signup = false
# Require double confirmation for email changes.
double_confirm_changes = true
# Require email confirmation before login.
enable_confirmations = true

[auth.sms]
# Disable SMS signups (use OAuth or invite-only).
enable_signup = false
# Require SMS confirmation.
enable_confirmations = true
# SMS OTP template.
template = "Your Traderama Pro verification code is {{ .Code }}."

# External OAuth providers (configured for trading platform users).
[auth.external.google]
enabled = true
client_id = "{{ env.GOOGLE_CLIENT_ID }}"
secret = "{{ env.GOOGLE_CLIENT_SECRET }}"
redirect_uri = "https://traderama.pro/auth/callback"

[auth.external.github]
enabled = true
client_id = "{{ env.GITHUB_CLIENT_ID }}"
secret = "{{ env.GITHUB_CLIENT_SECRET }}"
redirect_uri = "https://traderama.pro/auth/callback"

# Edge Functions configuration (container for individual functions).
[functions]
[functions.fetch-polygon-data]
verify_jwt = false

[functions.create-checkout]
verify_jwt = true
[functions.customer-portal]
verify_jwt = true

[functions.send-whatsapp-invites]
verify_jwt = true

[functions.alpaca-data]
verify_jwt = true

[functions.alpha-vantage-data]
verify_jwt = true

[functions.ig-data]
verify_jwt = true

[functions.proton-integration]
verify_jwt = true

[functions.airdrop-distribute]
verify_jwt = true

[functions.market-data-sync]
verify_jwt = true

[functions.process-scheduled-messages]
verify_jwt = true

[functions.send-notifications]
verify_jwt = true

[functions.strategy-publish]
verify_jwt = true

[functions.trade-execution]
verify_jwt = true

[functions.user-analytics]
verify_jwt = true
